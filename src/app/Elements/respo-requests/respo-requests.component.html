<div class="requests-wrapper">
    <h2>Requests</h2>
    <div class="top-bar">
        <div class="filter-bar" *ngIf="active=='progress'">
            <div class="pill progress active" (click)="filter('progress')">
                <img src="/assets/icons/progress.svg" alt="#">
                <span>In progress</span>
                <span class="count">{{progress.length}}</span>
            </div>
            <div class="pill pending"(click)="filter('pending')">
                <img src="/assets/icons/pending.svg" alt="#">
                <span>Pending</span>
                <span class="count">{{pending.length}}</span>
            </div>
            <div class="pill done" (click)="filter('done')">
                <img src="/assets/icons/done.svg" alt="#">
                <span>Done</span>
                <span class="count">{{done.length}}</span>
            </div>
            <div class="pill declined " (click)="filter('declined')">
                <img src="/assets/icons/declined.svg" alt="#">
                <span>Rejected</span>
                <span class="count">{{declined.length}}</span>
            </div>
        </div>
        <div class="filter-bar" *ngIf="active=='pending'">
            <div class="pill progress" (click)="filter('progress')">
                <img src="/assets/icons/progress.svg" alt="#">
                <span>In progress</span>
                <span class="count">{{progress.length}}</span>
            </div>
            <div class="pill pending active"(click)="filter('pending')">
                <img src="/assets/icons/pending.svg" alt="#">
                <span>Pending</span>
                <span class="count">{{pending.length}}</span>
            </div>
            <div class="pill done" (click)="filter('done')">
                <img src="/assets/icons/done.svg" alt="#">
                <span>Done</span>
                <span class="count">{{done.length}}</span>
            </div>
            <div class="pill declined " (click)="filter('declined')">
                <img src="/assets/icons/declined.svg" alt="#">
                <span>Rejected</span>
                <span class="count">{{declined.length}}</span>
            </div>
        </div>
        <div class="filter-bar" *ngIf="active=='done'">
            <div class="pill progress" (click)="filter('progress')">
                <img src="/assets/icons/progress.svg" alt="#">
                <span>In progress</span>
                <span class="count">{{progress.length}}</span>
            </div>
            <div class="pill pending"(click)="filter('pending')">
                <img src="/assets/icons/pending.svg" alt="#">
                <span>Pending</span>
                <span class="count">{{pending.length}}</span>
            </div>
            <div class="pill done active" (click)="filter('done')">
                <img src="/assets/icons/done.svg" alt="#">
                <span>Done</span>
                <span class="count">{{done.length}}</span>
            </div>
            <div class="pill declined " (click)="filter('declined')">
                <img src="/assets/icons/declined.svg" alt="#">
                <span>Rejected</span>
                <span class="count">{{declined.length}}</span>
            </div>
        </div>
        <div class="filter-bar" *ngIf="active=='declined'">
            <div class="pill progress" (click)="filter('progress')">
                <img src="/assets/icons/progress.svg" alt="#">
                <span>In progress</span>
                <span class="count">{{progress.length}}</span>
            </div>
            <div class="pill pending"(click)="filter('pending')">
                <img src="/assets/icons/pending.svg" alt="#">
                <span>Pending</span>
                <span class="count">{{pending.length}}</span>
            </div>
            <div class="pill done" (click)="filter('done')">
                <img src="/assets/icons/done.svg" alt="#">
                <span>Done</span>
                <span class="count">{{done.length}}</span>
            </div>
            <div class="pill declined active" (click)="filter('declined')">
                <img src="/assets/icons/declined.svg" alt="#">
                <span>Rejected</span>
                <span class="count">{{declined.length}}</span>
            </div>
        </div>

    </div>
    <div *ngIf="chosen.length==0" class="empty">
        <p>No results found ! ðŸ˜”</p>
    </div>
    <div class="requests-wrapper">
        <div class="requests" *ngIf="active=='declined'">
            <div class="request" (click)="navigate(request.idDemande)" *ngFor="let request of declined">
            <div class="top-line">
                <p>
                    <span class="request-title">{{request.titre}}</span>
                    <span class="flag declined">
                        <img src="/assets/icons/declined.svg" alt="#"/>
                        Rejected
                    </span>
                </p>
            </div>
            <div class="second-line"><p><img src="/assets/icons/smallUser.svg" alt=""/>{{request.client.nom}} {{request.client.prenom}}</p></div><div class="second-line">
                <p>
                    <span>Created on:</span> 
                    <span class="date">
                        {{ request.creationDate | slice:0:10 }}
                    </span>
                    - 
                    <span class="service">{{request.service}}</span>
                </p>
            </div>
            <p class="short-descriptions">
                {{request.message}}
            </p>
            </div>
        </div>
        <div class="requests" *ngIf="active=='pending'">
            <div class="request" (click)="navigate(request.idDemande)" *ngFor="let request of pending">
            <div class="top-line">
                <p>
                    <span class="request-id">#531{{request.idDemande}} - </span>
                    <span class="request-title">{{request.titre}}</span>
                    <span class="flag pending">
                        <img src="/assets/icons/pending.svg" alt="#"/>
                        Pending
                    </span>
                </p>
            </div>
            <div class="second-line"><p><img src="/assets/icons/smallUser.svg" alt=""/>{{request.client.nom}} {{request.client.prenom}}</p></div><div class="second-line">
                <p>
                    <span>Created on:</span> 
                    <span class="date">
                        {{ request.creationDate | slice:0:10 }}
                    </span>
                    - 
                    <span class="service">{{request.service}}</span>
                </p>
            </div>
            <p class="short-descriptions">
                {{request.message}}
            </p>
            </div>
        </div>
        <div class="requests" *ngIf="active=='done'">
            <div class="request" (click)="navigate(request.idDemande)" *ngFor="let request of done">
            <div class="top-line">
                <p>
                    <span class="request-id">#531{{request.idDemande}} - </span>
                    <span class="request-title">{{request.titre}}</span>
                    <span class="flag done">
                        <img src="/assets/icons/done.svg" alt="#"/>
                        Done
                    </span>
                </p>
            </div>
            <div class="second-line"><p><img src="/assets/icons/smallUser.svg" alt=""/>{{request.client.nom}} {{request.client.prenom}}</p></div><div class="second-line">
                <p>
                    <span>Created on:</span> 
                    <span class="date">
                        {{ request.creationDate | slice:0:10 }}
                    </span>
                    - 
                    <span class="date">
                        {{ request.date}}
                    </span>
                    - 
                    <span class="service">{{request.service}}</span>
                </p>
            </div>
            <p class="short-descriptions">{{request.message}}</p>
            <div class="bottom-line" *ngIf="request.rapports.length!=0">
                <p>Last updated on 
                    <span class="updated">{{request.rapports[0].date}}</span>
                    by <span class="employee">
                        {{request.rapports[0].employee.personne.nom}} 
                        {{request.rapports[0].employee.personne.prenom}} </span>
                </p>
        </div>
        <div class="bottom-line" *ngIf="request.rapports.length==0">
                <p>There are no updates yet.
                </p>
        </div>
            </div>
        </div>
        <div class="requests" *ngIf="active=='progress'">
            <div class="request" (click)="navigate(request.idDemande)" *ngFor="let request of progress">
            <div class="top-line">
                <p>
                    <span class="request-id">#531{{request.idDemande}} - </span>
                    <span class="request-title">{{request.titre}}</span>
                    <span class="flag progress">
                        <img src="/assets/icons/progress.svg" alt="#"/>
                        In progress
                    </span>
                </p>
            </div>
            <div class="second-line"><p><img src="/assets/icons/smallUser.svg" alt=""/>{{request.client.nom}} {{request.client.prenom}}</p></div><div class="second-line">
                <p>
                    <span>Due date:</span> 
                    <span class="date">
                        {{ request.date}}
                    </span>
                    - 
                    <span class="service">{{request.service}}</span>
                </p>
            </div>
            <p class="short-descriptions">{{request.message}}
                </p>
            <div class="bottom-line" *ngIf="request.rapports.length!=0">
                    <p>Last updated on 
                        <span class="updated">{{request.rapports[0].date}}</span>
                        by <span class="employee">
                            {{request.rapports[0].employee.personne.nom}} 
                            {{request.rapports[0].employee.personne.prenom}} </span>
                    </p>
            </div>
            <div class="bottom-line" *ngIf="request.rapports.length==0">
                    <p>There are no updates yet.
                    </p>
            </div>
            </div>
            </div>
        </div>
    </div>
    